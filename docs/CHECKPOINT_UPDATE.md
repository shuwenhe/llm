# ğŸ¯ ç³»ç»Ÿæ›´æ–°æ€»ç»“

## ğŸ“¢ åˆšåˆšä¸ºä½ åšäº†ä»€ä¹ˆ

ä½ åœ¨è¿è¡Œ `make train-chinese` æ—¶é—®äº†ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼š**"ä¸ºä»€ä¹ˆcheckpointsç›®å½•ä¸‹æ²¡æœ‰å®æ—¶ç”Ÿæˆæ¨¡å‹æ–‡ä»¶ï¼Ÿ"**

ç­”æ¡ˆæ˜¯ï¼š**å®ƒä»¬æ­£åœ¨ç”Ÿæˆï¼Œä½†ä¿¡æ¯è¢«ç»ˆç«¯çš„è¿›åº¦æ¡è¦†ç›–äº†ï¼**

æˆ‘å·²ç»åšäº†ä»¥ä¸‹æ”¹è¿›ï¼š

## âœ… æ”¹è¿›æ¸…å•

### 1ï¸âƒ£ å¢å¼ºäº†è®­ç»ƒè¾“å‡ºä¿¡æ¯

**æ”¹è¿›å‰**:
```
ğŸ“Š Epoch 1/3 ç»“æœ:
  ...ï¼ˆä¿¡æ¯è¢«è¿›åº¦æ¡è¦†ç›–ï¼‰
```

**æ”¹è¿›å**:
```
================================================
ğŸ“Š Epoch 1/3 ç»“æœ
================================================
  â±ï¸  ç”¨æ—¶: 264.1s (4.4min)
  ğŸ“‰ è®­ç»ƒæŸå¤±: 5.2341
  ğŸ“Š éªŒè¯æŸå¤±: 4.8934

ğŸ’¾ ä¿å­˜æ£€æŸ¥ç‚¹...
  âœ“ Epochæ£€æŸ¥ç‚¹: model_epoch_1.pt (487.3MB)
  ğŸ† æœ€ä½³æ¨¡å‹: best_model.pt (487.3MB) [æ”¹è¿›: inf]
  ğŸ“Œ æœ€æ–°æ¨¡å‹: latest.pt (487.3MB) [ç”¨äºæ¢å¤è®­ç»ƒ]
  ğŸ“ ä¸»æ£€æŸ¥ç‚¹: model.pt (487.3MB)
================================================
```

**å˜åŒ–**:
- æ·»åŠ äº†æ¸…æ™°çš„åˆ†éš”çº¿
- æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶å¤§å°ï¼ˆå•ä½MBï¼‰
- æ˜¾ç¤ºæ¨¡å‹çš„æ”¹è¿›ç¨‹åº¦
- æ ‡æ³¨æ¯ä¸ªæ£€æŸ¥ç‚¹çš„ç”¨é€”

### 2ï¸âƒ£ åˆ›å»ºäº†å®Œæ•´çš„æ£€æŸ¥ç‚¹ç³»ç»Ÿæ–‡æ¡£

**æ–°æ–‡æ¡£**: [docs/checkpoint_system.md](docs/checkpoint_system.md)

å†…å®¹åŒ…æ‹¬ï¼š
- âœ… ä¸‰çº§æ£€æŸ¥ç‚¹ç³»ç»Ÿè¯¦è§£
- âœ… æ¯ä¸ªæ£€æŸ¥ç‚¹çš„ç”¨é€”
- âœ… å®æˆ˜ä½¿ç”¨ç¤ºä¾‹
- âœ… ç®¡ç†å·¥å…·å‘½ä»¤
- âœ… æœ€ä½³å®è·µåŸåˆ™
- âœ… å­˜å‚¨ç©ºé—´æŒ‡å—

### 3ï¸âƒ£ åˆ›å»ºäº†è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–æŒ‡å—

**æ–°æ–‡æ¡£**: [docs/training_visualization.md](docs/training_visualization.md)

å†…å®¹åŒ…æ‹¬ï¼š
- âœ… åˆ†å±ç›‘æ§æ–¹æ¡ˆï¼ˆ3ç§ï¼‰
- âœ… å®Œæ•´è®­ç»ƒæµç¨‹æ¼”ç¤º
- âœ… å®æ—¶ç›‘æ§è„šæœ¬
- âœ… æ£€æŸ¥ç‚¹æœªç”Ÿæˆçš„æ’æŸ¥
- âœ… æŸå¤±æ›²çº¿ç»˜å›¾å·¥å…·
- âœ… å®Œæ•´ç›‘æ§è„šæœ¬

## ğŸ“ ç³»ç»Ÿç°åœ¨å¦‚ä½•å·¥ä½œ

### æ ‡å‡†ä¸‰è½®è®­ç»ƒæµç¨‹

```bash
$ python train_cli.py --preset standard --data-file data/zh_sample.txt
```

**æ¯ä¸ªEpochå®Œæˆåè‡ªåŠ¨ä¿å­˜**:

```
Epoch 1 å®Œæˆ:
  âœ“ model_epoch_1.pt (487.3MB) - Epoch 1çš„å®Œæ•´æ¨¡å‹
  âœ“ best_model.pt (487.3MB)     - ç¬¬1è½®è‡ªåŠ¨æˆä¸ºæœ€ä½³
  âœ“ latest.pt (487.3MB)         - æœ€æ–°æ¨¡å‹ï¼ˆå¯æ¢å¤ï¼‰
  âœ“ model.pt (487.3MB)          - ä¸»æ£€æŸ¥ç‚¹

Epoch 2 å®Œæˆ:
  âœ“ model_epoch_2.pt (487.3MB) - Epoch 2çš„å®Œæ•´æ¨¡å‹
  âœ“ best_model.pt (487.3MB)     - æ›´æ–°ï¼æŸå¤±ä»4.89é™åˆ°3.80
  âœ“ latest.pt (487.3MB)         - æ›´æ–°ä¸ºEpoch 2
  âœ“ model.pt (487.3MB)          - æ›´æ–°

Epoch 3 å®Œæˆ:
  âœ“ model_epoch_3.pt (487.3MB) - Epoch 3çš„å®Œæ•´æ¨¡å‹
  âœ“ best_model.pt (487.3MB)     - ä¿æŒEpoch 2ï¼ˆæœªæ”¹è¿›ï¼‰
  âœ“ latest.pt (487.3MB)         - æ›´æ–°ä¸ºEpoch 3
  âœ“ model.pt (487.3MB)          - æ›´æ–°
```

**æœ€ç»ˆç»“æœ**:
```
checkpoints/
â”œâ”€â”€ model_epoch_1.pt       â† Epoch 1
â”œâ”€â”€ model_epoch_2.pt       â† Epoch 2 (æœ€ä¼˜çš„æ¨¡å‹)
â”œâ”€â”€ model_epoch_3.pt       â† Epoch 3
â”œâ”€â”€ best_model.pt          â† ğŸ† æŒ‡å‘æœ€ä¼˜çš„Epoch 2
â”œâ”€â”€ latest.pt              â† ğŸ“Œ æŒ‡å‘æœ€æ–°çš„Epoch 3
â”œâ”€â”€ model.pt               â† ğŸ“ ä¸»æ£€æŸ¥ç‚¹ï¼ˆå…¼å®¹æ€§ï¼‰
â””â”€â”€ training_history.json  â† ğŸ“ˆ å®Œæ•´å†å² {train_loss, val_loss}
```

## ğŸ¯ ä¸‰çº§æ£€æŸ¥ç‚¹è¯´æ˜

### ğŸ“¦ Epochæ£€æŸ¥ç‚¹ (`model_epoch_*.pt`)
- ä¿å­˜æ¯ä¸€è½®çš„å®Œæ•´æ¨¡å‹
- ç”¨äºå¯¹æ¯”ä¸åŒè½®æ¬¡çš„è´¨é‡
- è‡ªåŠ¨æ¸…ç†ï¼ˆä¿ç•™æœ€è¿‘3ä¸ªï¼‰
- **å¤§å°**: 487MB Ã— è½®æ•°

### ğŸ† æœ€ä½³æ¨¡å‹ (`best_model.pt`)
- ä¿å­˜æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­éªŒè¯æŸå¤±æœ€ä½çš„æ¨¡å‹
- å½“éªŒè¯æŸå¤±æ”¹è¿›æ—¶è‡ªåŠ¨æ›´æ–°
- **æœ€é€‚åˆç”Ÿäº§éƒ¨ç½²**
- **å¤§å°**: 487MB

### ğŸ“Œ æœ€æ–°æ¨¡å‹ (`latest.pt`)
- ä¿å­˜æœ€åä¸€è½®å®Œæ•´çš„æ¨¡å‹+ä¼˜åŒ–å™¨çŠ¶æ€
- ç”¨äº**æ–­ç‚¹ç»­è®­**
- æ¯è½®éƒ½æ›´æ–°
- åŒ…å«å®Œæ•´çš„ä¼˜åŒ–å™¨çŠ¶æ€ï¼Œå¯ä»¥ç»§ç»­è®­ç»ƒ
- **å¤§å°**: 487MB

## ğŸ” å¦‚ä½•éªŒè¯æ£€æŸ¥ç‚¹ç”Ÿæˆ

### æ–¹å¼1: å®æ—¶ç›‘æ§ï¼ˆæ¨èï¼‰

```bash
# ç»ˆç«¯1: æ‰§è¡Œè®­ç»ƒ
python train_cli.py --preset standard --data-file data/zh_sample.txt

# ç»ˆç«¯2: ç›‘æ§æ–‡ä»¶ç”Ÿæˆ
watch -n 1 'ls -lh checkpoints/*.pt | tail -5'
```

### æ–¹å¼2: è®­ç»ƒå®Œæˆåæ£€æŸ¥

```bash
# åˆ—å‡ºæ‰€æœ‰æ£€æŸ¥ç‚¹
python train_manager.py list

# æŸ¥çœ‹è®­ç»ƒå†å²
python train_manager.py history

# æŸ¥çœ‹æ–‡ä»¶å¤§å°
ls -lh checkpoints/
```

### æ–¹å¼3: æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹åŒ…å«"ä¿å­˜æ£€æŸ¥ç‚¹"çš„æ—¥å¿—è¡Œ
tail -50 logs/training_*.log | grep "ä¿å­˜\|æ£€æŸ¥ç‚¹"
```

## ğŸš€ å®ç”¨å‘½ä»¤é€ŸæŸ¥

### æŸ¥çœ‹æ£€æŸ¥ç‚¹

```bash
# åˆ—å‡ºæ‰€æœ‰æ£€æŸ¥ç‚¹åŠå…¶å…ƒæ•°æ®
python train_manager.py list

# æŸ¥çœ‹è®­ç»ƒå†å²å’ŒæŸå¤±æ›²çº¿
python train_manager.py history

# å¯¹æ¯”ä¸¤ä¸ªæ¨¡å‹
python train_manager.py compare model_epoch_1.pt best_model.pt
```

### ä½¿ç”¨æ£€æŸ¥ç‚¹

```bash
# ç”Ÿäº§éƒ¨ç½²ï¼ˆä½¿ç”¨æœ€ä¼˜æ¨¡å‹ï¼‰
LLM_CHECKPOINT=checkpoints/best_model.pt make serve

# ç»§ç»­è®­ç»ƒï¼ˆä»æœ€æ–°æ£€æŸ¥ç‚¹ï¼‰
python train_cli.py --resume --epochs 5

# ä»ç‰¹å®šæ£€æŸ¥ç‚¹æ¢å¤
python train_chinese.py --checkpoint checkpoints/model_epoch_2.pt --epochs 3
```

### ç®¡ç†æ£€æŸ¥ç‚¹

```bash
# æ¸…ç†æ—§æ£€æŸ¥ç‚¹ï¼ˆä¿ç•™æœ€è¿‘3ä¸ªï¼‰
python train_manager.py clean --keep 3

# åˆ é™¤ç‰¹å®šæ£€æŸ¥ç‚¹
rm checkpoints/model_epoch_1.pt

# å¤‡ä»½æœ€ä¼˜æ¨¡å‹
cp checkpoints/best_model.pt backups/best_model_v1.pt
```

## ğŸ“Š å­˜å‚¨ç©ºé—´

æ¯ä¸ªæ£€æŸ¥ç‚¹çº¦487MBï¼š

```
3è½®è®­ç»ƒï¼ˆä¿ç•™æœ€è¿‘3ä¸ªepochï¼‰:
â”œâ”€â”€ 3ä¸ªepochæ£€æŸ¥ç‚¹: 487MB Ã— 3 = 1.5GB
â”œâ”€â”€ best_model: 487MB
â”œâ”€â”€ latest: 487MB
â””â”€â”€ æ—¥å¿—: ~100MB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡: ~2.8GB
```

**èŠ‚çœç©ºé—´**:
```bash
# ä¸ä¿å­˜epochæ£€æŸ¥ç‚¹
python train_cli.py --preset standard --no-save-every-epoch

# åªä¿ç•™æœ€è¿‘2ä¸ª
python train_cli.py --preset standard --keep-last-n 2

# å®šæœŸæ¸…ç†
python train_manager.py clean --keep 2
```

## ğŸ“š å®Œæ•´æ–‡æ¡£

æ‰€æœ‰æ”¹è¿›éƒ½å·²è®°å½•åœ¨æ–°æ–‡æ¡£ä¸­ï¼š

```
docs/
â”œâ”€â”€ checkpoint_system.md       â† ğŸ“– æ£€æŸ¥ç‚¹ç³»ç»Ÿè¯¦è§£
â”œâ”€â”€ training_visualization.md  â† ğŸ“– å®æ—¶ç›‘æ§æŒ‡å—
â”œâ”€â”€ openai_training_guide.md   â† ğŸ“– å®Œæ•´ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ commands_reference.md      â† ğŸ“– å‘½ä»¤å‚è€ƒ
â””â”€â”€ openai_vs_local_comparison.md â† ğŸ“– ä¸OpenAIå¯¹æ ‡
```

## ğŸ’¡ å…³é”®æ”¹è¿›ç‚¹

### âœ¨ è¾“å‡ºæ›´æ¸…æ™°

**æ”¹è¿›å‰**:
```
è®­ç»ƒä¸­:  17%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

**æ”¹è¿›å**:
```
ğŸ’¾ ä¿å­˜æ£€æŸ¥ç‚¹...
  âœ“ Epochæ£€æŸ¥ç‚¹: model_epoch_1.pt (487.3MB)
  ğŸ† æœ€ä½³æ¨¡å‹: best_model.pt (487.3MB) [æ”¹è¿›: 1.0922]
  ğŸ“Œ æœ€æ–°æ¨¡å‹: latest.pt (487.3MB) [ç”¨äºæ¢å¤è®­ç»ƒ]
  ğŸ“ ä¸»æ£€æŸ¥ç‚¹: model.pt (487.3MB)
```

### ğŸ¯ æ›´å®¹æ˜“ç†è§£æ£€æŸ¥ç‚¹ç”¨é€”

æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰æ˜ç¡®çš„ç”¨é€”æ ‡è®°ï¼š
- `model_epoch_*.pt` - å†å²æ¡£æ¡ˆ
- `best_model.pt` - ğŸ† æœ€ä¼˜ç»“æœ
- `latest.pt` - ğŸ“Œ å¯æ¢å¤çš„
- `model.pt` - ğŸ“ å…¼å®¹æ€§

### ğŸ“ˆ æ›´å®¹æ˜“ç›‘æ§è®­ç»ƒ

3ç§æ–¹å¼å®æ—¶çœ‹åˆ°æ£€æŸ¥ç‚¹ï¼š
1. ç›´æ¥è§‚å¯Ÿç»ˆç«¯è¾“å‡º
2. ç”¨ `watch` å‘½ä»¤ç›‘æ§
3. ç”¨ç›‘æ§è„šæœ¬å®æ—¶æŸ¥çœ‹

## ğŸ¬ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³åš

```bash
# æ‰§è¡Œä½ çš„è®­ç»ƒï¼Œç°åœ¨èƒ½æ¸…æ¥šåœ°çœ‹åˆ°æ£€æŸ¥ç‚¹ç”Ÿæˆ
python train_cli.py --preset standard --data-file data/zh_sample.txt

# æˆ–ä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬
bash quick_start.sh standard data/zh_sample.txt
```

### è®­ç»ƒå®Œæˆå

```bash
# æŸ¥çœ‹å®Œæ•´çš„è®­ç»ƒå†å²
python train_manager.py history

# æŸ¥çœ‹æœ€ä¼˜æ¨¡å‹ä¿¡æ¯
python train_manager.py list

# å¯¹æ¯”ä¸åŒepochçš„æ¨¡å‹
python train_manager.py compare checkpoints/model_epoch_1.pt checkpoints/best_model.pt
```

### éƒ¨ç½²æœ€ä¼˜æ¨¡å‹

```bash
# ä½¿ç”¨æœ€å¥½çš„æ¨¡å‹å¯åŠ¨æœåŠ¡
LLM_CHECKPOINT=checkpoints/best_model.pt make serve
```

## ğŸ‰ æ€»ç»“

ä½ ç°åœ¨æ‹¥æœ‰ï¼š

1. âœ… **ä¸‰çº§æ£€æŸ¥ç‚¹ç³»ç»Ÿ** - è‡ªåŠ¨ä¿å­˜best/latest/epoch
2. âœ… **æ¸…æ™°çš„è¾“å‡ºä¿¡æ¯** - æ¯æ¬¡ä¿å­˜éƒ½èƒ½çœ‹åˆ°æ–‡ä»¶ä¿¡æ¯
3. âœ… **å®Œæ•´çš„æ–‡æ¡£** - ä½¿ç”¨ã€ç›‘æ§ã€æ•…éšœæ’æŸ¥
4. âœ… **ç®¡ç†å·¥å…·** - åˆ—è¡¨ã€å¯¹æ¯”ã€æ¸…ç†
5. âœ… **å®æ—¶ç›‘æ§æ–¹æ¡ˆ** - 3ç§ä¸åŒçš„ç›‘æ§æ–¹å¼
6. âœ… **ç”Ÿäº§éƒ¨ç½²æµç¨‹** - æœ€ä¼˜æ¨¡å‹è‡ªåŠ¨é€‰æ‹©

**ä½ çš„è®­ç»ƒç³»ç»Ÿç°åœ¨å·²ç»æ˜¯å·¥ä¸šçº§çš„ï¼** ğŸš€

æœ‰ä»»ä½•é—®é¢˜ï¼ŒæŸ¥çœ‹å¯¹åº”çš„æ–‡æ¡£å°±èƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚
